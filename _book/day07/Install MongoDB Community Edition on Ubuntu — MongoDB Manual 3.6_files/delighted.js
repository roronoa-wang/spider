          try {
            (function(){
              var exports=exports||{};!function(t){exports.qs=t()}(function(){return function t(e,i,n){function o(r,a){if(!i[r]){if(!e[r]){var u="function"==typeof require&&require;if(!a&&u)return u(r,!0);if(s)return s(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[r]={exports:{}};e[r][0].call(c.exports,function(t){var i=e[r][1][t];return o(i?i:t)},c,c.exports,t,e,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e){"use strict";var i=t("./stringify"),n=t("./parse");e.exports={stringify:i,parse:n}},{"./parse":2,"./stringify":3}],2:[function(t,e){"use strict";var i=t("./utils"),n=Object.prototype.hasOwnProperty,o={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:!1,plainObjects:!1,allowPrototypes:!1,allowDots:!1,decoder:i.decode},s=function(t,e){for(var i={},o=t.split(e.delimiter,e.parameterLimit===1/0?void 0:e.parameterLimit),s=0;s<o.length;++s){var r,a,u=o[s],l=u.indexOf("]=")===-1?u.indexOf("="):u.indexOf("]=")+1;l===-1?(r=e.decoder(u),a=e.strictNullHandling?null:""):(r=e.decoder(u.slice(0,l)),a=e.decoder(u.slice(l+1))),n.call(i,r)?i[r]=[].concat(i[r]).concat(a):i[r]=a}return i},r=function t(e,i,n){if(!e.length)return i;var o,s=e.shift();if("[]"===s)o=[],o=o.concat(t(e,i,n));else{o=n.plainObjects?Object.create(null):{};var r="["===s[0]&&"]"===s[s.length-1]?s.slice(1,s.length-1):s,a=parseInt(r,10);!isNaN(a)&&s!==r&&String(a)===r&&a>=0&&n.parseArrays&&a<=n.arrayLimit?(o=[],o[a]=t(e,i,n)):o[r]=t(e,i,n)}return o},a=function(t,e,i){if(t){var o=i.allowDots?t.replace(/\.([^\.\[]+)/g,"[$1]"):t,s=/^([^\[\]]*)/,a=/(\[[^\[\]]*\])/g,u=s.exec(o),l=[];if(u[1]){if(!i.plainObjects&&n.call(Object.prototype,u[1])&&!i.allowPrototypes)return;l.push(u[1])}for(var c=0;null!==(u=a.exec(o))&&c<i.depth;)c+=1,(i.plainObjects||!n.call(Object.prototype,u[1].replace(/\[|\]/g,""))||i.allowPrototypes)&&l.push(u[1]);return u&&l.push("["+o.slice(u.index)+"]"),r(l,e,i)}};e.exports=function(t,e){var n=e||{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.delimiter="string"==typeof n.delimiter||i.isRegExp(n.delimiter)?n.delimiter:o.delimiter,n.depth="number"==typeof n.depth?n.depth:o.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:o.arrayLimit,n.parseArrays=n.parseArrays!==!1,n.decoder="function"==typeof n.decoder?n.decoder:o.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:o.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:o.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:o.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:o.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:o.strictNullHandling,""===t||null===t||"undefined"==typeof t)return n.plainObjects?Object.create(null):{};for(var r="string"==typeof t?s(t,n):t,u=n.plainObjects?Object.create(null):{},l=Object.keys(r),c=0;c<l.length;++c){var h=l[c],p=a(h,r[h],n);u=i.merge(u,p,n)}return i.compact(u)}},{"./utils":4}],3:[function(t,e){"use strict";var i=t("./utils"),n={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},o={delimiter:"&",strictNullHandling:!1,skipNulls:!1,encode:!0,encoder:i.encode},s=function t(e,n,o,s,r,a,u,l,c){var h=e;if("function"==typeof u)h=u(n,h);else if(h instanceof Date)h=h.toISOString();else if(null===h){if(s)return a?a(n):n;h=""}if("string"==typeof h||"number"==typeof h||"boolean"==typeof h||i.isBuffer(h))return a?[a(n)+"="+a(h)]:[n+"="+String(h)];var p=[];if("undefined"==typeof h)return p;var d;if(Array.isArray(u))d=u;else{var m=Object.keys(h);d=l?m.sort(l):m}for(var f=0;f<d.length;++f){var y=d[f];r&&null===h[y]||(p=Array.isArray(h)?p.concat(t(h[y],o(n,y),o,s,r,a,u,l,c)):p.concat(t(h[y],n+(c?"."+y:"["+y+"]"),o,s,r,a,u,l,c)))}return p};e.exports=function(t,e){var i,r,a=t,u=e||{},l="undefined"==typeof u.delimiter?o.delimiter:u.delimiter,c="boolean"==typeof u.strictNullHandling?u.strictNullHandling:o.strictNullHandling,h="boolean"==typeof u.skipNulls?u.skipNulls:o.skipNulls,p="boolean"==typeof u.encode?u.encode:o.encode,d=p?"function"==typeof u.encoder?u.encoder:o.encoder:null,m="function"==typeof u.sort?u.sort:null,f="undefined"!=typeof u.allowDots&&u.allowDots;if(null!==u.encoder&&void 0!==u.encoder&&"function"!=typeof u.encoder)throw new TypeError("Encoder has to be a function.");"function"==typeof u.filter?(r=u.filter,a=r("",a)):Array.isArray(u.filter)&&(i=r=u.filter);var y=[];if("object"!=typeof a||null===a)return"";var g;g=u.arrayFormat in n?u.arrayFormat:"indices"in u?u.indices?"indices":"repeat":"indices";var v=n[g];i||(i=Object.keys(a)),m&&i.sort(m);for(var S=0;S<i.length;++S){var _=i[S];h&&null===a[_]||(y=y.concat(s(a[_],_,v,c,h,d,r,m,f)))}return y.join(l)}},{"./utils":4}],4:[function(t,e,i){"use strict";var n=function(){for(var t=new Array(256),e=0;e<256;++e)t[e]="%"+((e<16?"0":"")+e.toString(16)).toUpperCase();return t}();i.arrayToObject=function(t,e){for(var i=e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)"undefined"!=typeof t[n]&&(i[n]=t[n]);return i},i.merge=function(t,e,n){if(!e)return t;if("object"!=typeof e){if(Array.isArray(t))t.push(e);else{if("object"!=typeof t)return[t,e];t[e]=!0}return t}if("object"!=typeof t)return[t].concat(e);var o=t;return Array.isArray(t)&&!Array.isArray(e)&&(o=i.arrayToObject(t,n)),Object.keys(e).reduce(function(t,o){var s=e[o];return Object.prototype.hasOwnProperty.call(t,o)?t[o]=i.merge(t[o],s,n):t[o]=s,t},o)},i.decode=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},i.encode=function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),i="",o=0;o<e.length;++o){var s=e.charCodeAt(o);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?i+=e.charAt(o):s<128?i+=n[s]:s<2048?i+=n[192|s>>6]+n[128|63&s]:s<55296||s>=57344?i+=n[224|s>>12]+n[128|s>>6&63]+n[128|63&s]:(o+=1,s=65536+((1023&s)<<10|1023&e.charCodeAt(o)),i+=n[240|s>>18]+n[128|s>>12&63]+n[128|s>>6&63]+n[128|63&s])}return i},i.compact=function(t,e){if("object"!=typeof t||null===t)return t;var n=e||[],o=n.indexOf(t);if(o!==-1)return n[o];if(n.push(t),Array.isArray(t)){for(var s=[],r=0;r<t.length;++r)t[r]&&"object"==typeof t[r]?s.push(i.compact(t[r],n)):"undefined"!=typeof t[r]&&s.push(t[r]);return s}for(var a=Object.keys(t),u=0;u<a.length;++u){var l=a[u];t[l]=i.compact(t[l],n)}return t},i.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},i.isBuffer=function(t){return null!==t&&"undefined"!=typeof t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}},{}]},{},[1])(1)}),function(t){var e=function(){"use strict";function t(e,i,n,o){function r(e,n){if(null===e)return null;if(0===n)return e;var a,h;if("object"!=typeof e)return e;if(t.__isArray(e))a=[];else if(t.__isRegExp(e))a=new RegExp(e.source,s(e)),e.lastIndex&&(a.lastIndex=e.lastIndex);else if(t.__isDate(e))a=new Date(e.getTime());else{if(c&&Buffer.isBuffer(e))return a=new Buffer(e.length),e.copy(a),a;"undefined"==typeof o?(h=Object.getPrototypeOf(e),a=Object.create(h)):(a=Object.create(o),h=o)}if(i){var p=u.indexOf(e);if(p!=-1)return l[p];u.push(e),l.push(a)}for(var d in e){var m;h&&(m=Object.getOwnPropertyDescriptor(h,d)),m&&null==m.set||(a[d]=r(e[d],n-1))}return a}var a;"object"==typeof i&&(n=i.depth,o=i.prototype,a=i.filter,i=i.circular);var u=[],l=[],c="undefined"!=typeof Buffer;return"undefined"==typeof i&&(i=!0),"undefined"==typeof n&&(n=1/0),r(e,n)}function e(t){return Object.prototype.toString.call(t)}function i(t){return"object"==typeof t&&"[object Date]"===e(t)}function n(t){return"object"==typeof t&&"[object Array]"===e(t)}function o(t){return"object"==typeof t&&"[object RegExp]"===e(t)}function s(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return t.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},t.__objToStr=e,t.__isDate=i,t.__isArray=n,t.__isRegExp=o,t.__getRegExpFlags=s,t}();t.clone=e}("object"==typeof exports?exports:this),function(t){exports.topdomain=t()}(function(){return function t(e,i,n){function o(r,a){if(!i[r]){if(!e[r]){var u="function"==typeof require&&require;if(!a&&u)return u(r,!0);if(s)return s(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[r]={exports:{}};e[r][0].call(c.exports,function(t){var i=e[r][1][t];return o(i?i:t)},c,c.exports,t,e,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e,i){"use strict";function n(t){for(var e=i.cookie,n=i.levels(t),o=0;o<n.length;++o){var s="__tld__",r=n[o],a={domain:"."+r};if(e(s,1,a),e(s))return e(s,null,a),r}return""}var o=t("component-url").parse,s=t("component-cookie");n.levels=function(t){var e=o(t).hostname,i=e.split("."),n=i[i.length-1],s=[];if(4===i.length&&n===parseInt(n,10))return s;if(i.length<=1)return s;for(var r=i.length-2;r>=0;--r)s.push(i.slice(r).join("."));return s},n.cookie=s,i=e.exports=n},{"component-cookie":2,"component-url":3}],2:[function(t,e){function i(t,e,i){i=i||{};var n=r(t)+"="+r(e);null==e&&(i.maxage=-1),i.maxage&&(i.expires=new Date(+new Date+i.maxage)),i.path&&(n+="; path="+i.path),i.domain&&(n+="; domain="+i.domain),i.expires&&(n+="; expires="+i.expires.toUTCString()),i.secure&&(n+="; secure"),document.cookie=n}function n(){var t;try{t=document.cookie}catch(t){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t.stack||t),{}}return s(t)}function o(t){return n()[t]}function s(t){var e,i={},n=t.split(/ *; */);if(""==n[0])return i;for(var o=0;o<n.length;++o)e=n[o].split("="),i[a(e[0])]=a(e[1]);return i}function r(t){try{return encodeURIComponent(t)}catch(t){}}function a(t){try{return decodeURIComponent(t)}catch(t){}}e.exports=function(t,e,s){switch(arguments.length){case 3:case 2:return i(t,e,s);case 1:return o(t);default:return n()}}},{}],3:[function(t,e,i){function n(t){switch(t){case"http:":return 80;case"https:":return 443;default:return location.port}}i.parse=function(t){var e=document.createElement("a");return e.href=t,{href:e.href,host:e.host||location.host,port:"0"===e.port||""===e.port?n(e.protocol):e.port,hash:e.hash,hostname:e.hostname||location.hostname,pathname:"/"!=e.pathname.charAt(0)?"/"+e.pathname:e.pathname,protocol:e.protocol&&":"!=e.protocol?e.protocol:location.protocol,search:e.search,query:e.search.slice(1)}},i.isAbsolute=function(t){return 0==t.indexOf("//")||!!~t.indexOf("://")},i.isRelative=function(t){return!i.isAbsolute(t)},i.isCrossDomain=function(t){t=i.parse(t);var e=i.parse(e.href);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol}},{}]},{},[1])(1)}),function(){exports.utils={timeout:function(t,e){return setTimeout(e,t)},getCurrentTimestamp:function(){return(new Date).getTime()},sampleArray:function(t){return t[Math.floor(Math.random()*t.length)]},buildLogger:function(t,e){var i,n,o,s;n={silent:0,error:1,warn:2,info:3,debug:4},o={level:e||"warn"},i=function(e,i){return o[e]=function(){var s,r;if(i<=n[o.level]){s=Array.prototype.slice.apply(arguments),n[o.level]>3&&"performance"in window&&"now"in window.performance&&s.unshift("+"+Math.round(performance.now())+"ms"),s.unshift(t);try{return"undefined"!=typeof console&&null!==console&&null!=(r=console[e])?r.apply(console,s):void 0}catch(t){return console.log(e+" "+s.join(", "))}}}};for(e in n)s=n[e],i(e,s);return o},ajaxSimpleCors:function(t){var e,i,n,o;return e=t.body||{},n=(t.method||"GET").toUpperCase(),i="GET"===n||"POST"===n?n:(e._method=n,"POST"),o=new XMLHttpRequest,o.open(i,t.url),o.withCredentials=!!t.withCredentials,o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.setRequestHeader("Accept","application/json"),t.callback&&(o.onload=function(){var e;return e=JSON.parse(o.responseText),e.redirect_url?exports.utils.ajaxSimpleCors({url:e.redirect_url,callback:t.callback,withCredentials:t.withCredentials}):t.callback(e)}),"GET"!==i?o.send(exports.qs.stringify(e)):o.send()}}}.call(this),function(t){!function(e){t.Cookies=e()}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var i=arguments[t];for(var n in i)e[n]=i[n]}return e}function e(i){function n(e,o,s){var r;if("undefined"!=typeof document){if(arguments.length>1){if(s=t({path:"/"},n.defaults,s),"number"==typeof s.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*s.expires),s.expires=a}try{r=JSON.stringify(o),/^[\{\[]/.test(r)&&(o=r)}catch(t){}return o=i.write?i.write(o,e):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape),document.cookie=[e,"=",o,s.expires&&"; expires="+s.expires.toUTCString(),s.path&&"; path="+s.path,s.domain&&"; domain="+s.domain,s.secure?"; secure":""].join("")}e||(r={});for(var u=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,c=0;c<u.length;c++){var h=u[c].split("="),p=h[0].replace(l,decodeURIComponent),d=h.slice(1).join("=");'"'===d.charAt(0)&&(d=d.slice(1,-1));try{if(d=i.read?i.read(d,p):i(d,p)||d.replace(l,decodeURIComponent),this.json)try{d=JSON.parse(d)}catch(t){}if(e===p){r=d;break}e||(r[p]=d)}catch(t){}}return r}}return n.set=n,n.get=function(t){return n(t)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(e,i){n(e,"",t(i,{expires:-1}))},n.withConverter=e,n}return e(function(){})})}("object"==typeof exports?exports:this),!function(t,e){exports[t]=e()}("domready",function(t){function e(t){for(d=1;t=n.shift();)t()}var i,n=[],o=!1,s=document,r=s.documentElement,a=r.doScroll,u="DOMContentLoaded",l="addEventListener",c="onreadystatechange",h="readyState",p=a?/^loaded|^c/:/^loaded|c/,d=p.test(s[h]);return s[l]&&s[l](u,i=function(){s.removeEventListener(u,i,o),e()},o),a&&s.attachEvent(c,i=function(){/^c/.test(s[h])&&(s.detachEvent(c,i),e())}),t=a?function(e){self!=top?d?e():n.push(e):function(){try{r.doScroll("left")}catch(i){return setTimeout(function(){t(e)},50)}e()}()}:function(t){d?t():n.push(t)}}),function(t){var e=0,i=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||function(t){var i=(new Date).getTime(),n=Math.max(0,16-(i-e)),o=setTimeout(function(){t(i+n)},n);return e=i+n,o};t.requestAnimationFrame=function(t,e){return i.call(window,t,e)}}("object"==typeof exports?exports:this),function(t){var e="addEventListener"in window?"addEventListener":"attachEvent",i=function(t){return"addEventListener"===t?function(t,e,i){return t.addEventListener(e,i,!1)}:function(t,e,i){return t.attachEvent("on"+e,i)}}(e);t.addEventListener=i}("object"==typeof exports?exports:this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};exports.DomHelpers=function(){function e(e){this.detectOrientation=t(this.detectOrientation,this),this.calcScreenHeight=t(this.calcScreenHeight,this),this.calcWindowWidth=t(this.calcWindowWidth,this),this.calcWindowHeight=t(this.calcWindowHeight,this),this.bindEvent=t(this.bindEvent,this),this._getInitialStyleFloat=t(this._getInitialStyleFloat,this),this.translateY=t(this.translateY,this),this.transition=t(this.transition,this),this.setOpacity=t(this.setOpacity,this),this.clearInlineStyle=t(this.clearInlineStyle,this),this.setStyle=t(this.setStyle,this),this.getComputedStyle=t(this.getComputedStyle,this),this.config=e}return e.prototype.getComputedStyle=function(t,e){return this.config.BROWSER_SUPPORT.features.getComputedStyle?getComputedStyle(t,null).getPropertyValue(e):t.currentStyle[e]},e.prototype.setStyle=function(t,e,i){return t.style.setProperty(e,i,"important")},e.prototype.clearInlineStyle=function(t,e){return t.style.removeProperty(e)},e.prototype.setOpacity=function(t,e){return this.setStyle(t,"opacity",e)},e.prototype.transition=function(t,e){if(this.config.BROWSER_SUPPORT.features.transition)return this.config.BROWSER_SUPPORT.features.transform?this.setStyle(t,"transition",e):this.setStyle(t,"transition",e.replace(/transform/g,"bottom"))},e.prototype.translateY=function(t,e){var i;return this.config.BROWSER_SUPPORT.features.transform?this.setStyle(t,"transform","translate3d(0, "+e+"px, 0)"):(i=this._getInitialStyleFloat(t,"bottom"),"static"===this.getComputedStyle(t,"position")&&this.setStyle(t,"position","relative"),this.setStyle(t,"bottom",-e+i+"px"))},e.prototype._getInitialStyleFloat=function(t,e){var i;return(i=t.getAttribute("data-initial-"+e))?parseFloat(i,10):(i=parseFloat(this.getComputedStyle(t,e),10)||0,t.setAttribute("data-initial-"+e,i),i)},e.prototype.bindEvent=function(t,e,i){return exports.addEventListener(t,e,i)},e.prototype.calcWindowHeight=function(){return innerHeight},e.prototype.calcWindowWidth=function(){return innerWidth},e.prototype.calcScreenHeight=function(){return"portrait"===this.detectOrientation()?Math.max(screen.availHeight,screen.availWidth):Math.min(screen.availHeight,screen.availWidth)},e.prototype.detectOrientation=function(){return this.calcWindowHeight()>this.calcWindowWidth()?"portrait":"landscape"},e}()}.call(this),function(){var t=Date.now||function(){return(new Date).getTime()},e=function(e,i,n){var o,s,r,a=null,u=0;n||(n={});var l=function(){u=n.leading===!1?0:t(),a=null,r=e.apply(o,s),a||(o=s=null)};return function(){var c=t();u||n.leading!==!1||(u=c);var h=i-(c-u);return o=this,s=arguments,h<=0||h>i?(a&&(clearTimeout(a),a=null),u=c,r=e.apply(o,s),a||(o=s=null)):a||n.trailing===!1||(a=setTimeout(l,h)),r}};exports.throttle=e}(),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};exports.TypingIndicator=function(){function e(e,i){this._bindTypingEvents=t(this._bindTypingEvents,this),this._handleWebSocketMessage=t(this._handleWebSocketMessage,this);var n;n=e.BROWSER_SUPPORT.features.webSocket&&e.BROWSER_SUPPORT.features.cors&&e.BROWSER_SUPPORT.features.json,n&&(this.$el=i.$el,this.config=e,this.pusherData=JSON.parse(this.$el.getAttribute("data-pusher")),this.ws=new WebSocket("wss://ws.pusherapp.com/app/"+this.pusherData.public_key+"?protocol=6"),this.ws.onmessage=this._handleWebSocketMessage)}return e.prototype._handleWebSocketMessage=function(t){var e;return e=JSON.parse(t.data),"string"==typeof e.data&&(e.data=JSON.parse(e.data)),"pusher_internal:subscription_succeeded"===e.event?this._bindTypingEvents():"pusher:connection_established"===e.event?exports.utils.ajaxSimpleCors({method:"POST",url:this.pusherData.auth_url,withCredentials:/^staging/.test(this.config.ENV),body:{survey_request_token:this.pusherData.survey_request_token,socket_id:e.data.socket_id,channel_name:this.pusherData.channel_name},callback:function(t){return function(e){var i;return i={event:"pusher:subscribe",data:{auth:e.auth,channel:t.pusherData.channel_name}},t.ws.send(JSON.stringify(i))}}(this)}):void 0},e.prototype._bindTypingEvents=function(){var t,e,i,n;return n=0,i=1e3,t=function(t){return function(){var e;if(!(n>=i))return e={event:"client-typing",channel:t.pusherData.channel_name,data:{survey_request_token:t.pusherData.survey_request_token}},t.ws.send(JSON.stringify(e)),n+=1}}(this),e=exports.throttle(t,2e3),exports.addEventListener(this.$el,"input",e)},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};exports.DisplayStrategy=function(){function e(e,i){this._setupTypingIndicator=t(this._setupTypingIndicator,this),this._disableMask=t(this._disableMask,this),this._resizeMask=t(this._resizeMask,this),this._computeMaskHeight=t(this._computeMaskHeight,this),this._setupMask=t(this._setupMask,this),this._pseudoBlurCommentBox=t(this._pseudoBlurCommentBox,this),this._pseudoFocusCommentBox=t(this._pseudoFocusCommentBox,this),this._setupEventHandlers=t(this._setupEventHandlers,this),this._injectThankYouTemplate=t(this._injectThankYouTemplate,this),this._confirmationText=t(this._confirmationText,this),this._clearScore=t(this._clearScore,this),this._setScore=t(this._setScore,this),this._getScore=t(this._getScore,this),this._measure=t(this._measure,this),this._injectTemplate=t(this._injectTemplate,this),this._remove=t(this._remove,this),this._getTemplate=t(this._getTemplate,this),this.toggleStateForPreview=t(this.toggleStateForPreview,this);var n;this.config=e,this.opts=i,(n=this.opts).offsets||(n.offsets={}),this.timingFactor=1,this.transitionDuration=.5*this.timingFactor,this.transitionEasing="cubic-bezier(0.32, 0.6, 0.08, 1.00)",this.dom=new exports.DomHelpers(this.config),this.state="initial"}return e.prototype.toggleStateForPreview=function(t,e,i){var n,o,s;if(null==i&&(i={}),n=t.slice(),o=this.state.slice(),n!==o)switch(this.config.LOGGER.debug("Toggling '"+o+"' -> '"+n+"'."),this.score&&(e=this.score),s=o+" -> "+n){case"toast -> question":return this._showQuestion();case"toast -> comment":return this._showComment(e);case"question -> toast":return this._hideQuestion();case"question -> comment":return this._showComment(e);case"comment -> question":return i.disableClearScoreOnHideComment||this._clearScore(),this._showQuestion();case"comment -> toast":return i.disableClearScoreOnHideComment||this._clearScore(),this._hideComment();default:return this.config.LOGGER.error("Cannot toggle '"+o+"' -> '"+n+"'.")}},e.prototype._getTemplate=function(t){var e;return e=function(e){return function(i){return e.token=i.token,t(i)}}(this),this.config.SURVEY_TEMPLATE?e(this.config.SURVEY_TEMPLATE):(this.config.TELEMETRY.instrument("GET_TEMPLATE_START",{token:this.opts.params._delighted_survey_request_token}),exports.utils.ajaxSimpleCors({method:"POST",url:this.config.SURVEY_URL,body:this.opts.params,withCredentials:/^staging/.test(this.config.ENV),callback:function(t){return function(i){return i.abort?(t.config.TELEMETRY.instrument("GET_TEMPLATE_ABORT",{reason:i.reason}),t.config.LOGGER.warn("Survey cancelled because "+i.reason+".")):(t.config.TELEMETRY.instrument("GET_TEMPLATE_OK",{token:i.token}),e(i))}}(this)}))},e.prototype._remove=function(){if(this.$root)return exports.requestAnimationFrame(function(t){return function(){return exports.utils.timeout(1e3*t.transitionDuration,function(){return t.$root.parentNode.removeChild(t.$root),t.$root=null})}}(this))},e.prototype._injectTemplate=function(t){var e;return document.body.insertAdjacentHTML("beforeend",t.html),this.$root=document.querySelector("#delighted-web-"+t.id),this.$survey=this.$root.querySelector(".delighted-web-survey"),this.$surveyInner=this.$root.querySelector(".delighted-web-survey-inner"),this.$surveyPowered=this.$root.querySelector(".delighted-web-survey-powered"),this.$surveyClose=this.$root.querySelector(".delighted-web-survey-close"),this.$stepQuestion=this.$root.querySelector(".delighted-web-step-question"),this.$stepComment=this.$root.querySelector(".delighted-web-step-comment"),this.$stepThanks=this.$root.querySelector(".delighted-web-step-thanks"),e=this.$root.querySelector(".delighted-web-label-comment").getAttribute("data-text"),this._confirmationTextByScore=JSON.parse(e),this._setupMask()},e.prototype._measure=function(){return this.heightSurvey=this.$survey.offsetHeight,this.heightStepQuestion=this.$stepQuestion.offsetHeight,this.heightStepComment=this.$stepComment.offsetHeight,this.heightStepThanks=this.$stepThanks.offsetHeight},e.prototype._getScore=function(t){return{text:t.innerText,number:parseInt(t.getAttribute("data-score"),10)}},e.prototype._setScore=function(t){var e,i,n,o,s;if(t){for(this.score=t,s=this.$stepQuestion.querySelectorAll(".delighted-web-question-score-number"),i=0,n=s.length;i<n;i++)e=s[i],t.number===this._getScore(e).number?(e.classList.remove("delighted-web-is-inactive"),e.classList.add("delighted-web-is-active")):(e.classList.add("delighted-web-is-inactive"),e.classList.remove("delighted-web-is-active"));return this.$stepQuestion.querySelector(".delighted-web-question-score-numbers").classList.add("delighted-web-is-active"),this.$stepComment.querySelector(".delighted-web-label-comment").innerText=this._confirmationText(t),(o=this.$surveyPowered.getAttribute("data-url-tail"))?this.$surveyPowered.href=o:void 0}},e.prototype._clearScore=function(){var t,e,i,n;for(this.score=null,n=this.$stepQuestion.querySelectorAll(".delighted-web-question-score-number"),e=0,i=n.length;e<i;e++)t=n[e],t.classList.remove("delighted-web-is-inactive"),t.classList.remove("delighted-web-is-active");return this.$stepQuestion.querySelector(".delighted-web-question-score-numbers").classList.remove("delighted-web-is-active")},e.prototype._confirmationText=function(t){return this._confirmationTextByScore[t.number]},e.prototype._injectThankYouTemplate=function(t){return this.$stepThanks.innerHTML=t,this._measure()},e.prototype._setupEventHandlers=function(){var t,e,i,n,o;for(o=this.$stepQuestion.querySelectorAll(".delighted-web-question-score-number"),e=function(t){return function(e){return t.dom.bindEvent(e,"click",function(i){var n,o,s;return i.preventDefault(),o=t._getScore(e),s=e.getAttribute("data-url"),exports.utils.ajaxSimpleCors({url:s,withCredentials:/^staging/.test(t.config.ENV),callback:function(e){if("thanks"!==t.state)return t._injectThankYouTemplate(e.thank_you_html)}}),t.$stepComment.querySelector(".delighted-web-comment").action=s,t._showComment(o),"function"==typeof(n=t.opts).onRespond&&n.onRespond({token:t.token,score:o.number}),exports.utils.timeout(t.transitionDuration,t._setupTypingIndicator)})}}(this),i=0,n=o.length;i<n;i++)t=o[i],e(t);return this.dom.bindEvent(this.$stepComment.querySelector(".delighted-web-comment"),"submit",function(t){return function(e){var i,n,o,s,r,a,u;for(e.preventDefault(),n=e.target,s={},u=n.querySelectorAll("input, textarea"),r=0,a=u.length;r<a;r++)i=u[r],s[i.name]=i.value;return exports.utils.ajaxSimpleCors({method:"PUT",url:n.action,body:s,withCredentials:/^staging/.test(t.config.ENV)}),t._showThanks(),"function"==typeof(o=t.opts).onComment?o.onComment({token:t.token}):void 0}}(this)),this.dom.bindEvent(this.$stepComment.querySelector(".delighted-web-comment-box"),"focus",this._pseudoFocusCommentBox),this.dom.bindEvent(this.$stepComment.querySelector(".delighted-web-comment-box"),"blur",this._pseudoBlurCommentBox),this.dom.bindEvent(this.$surveyClose,"click",function(t){return function(){return t.hide({source:"close"})}}(this))},e.prototype._pseudoFocusCommentBox=function(){return this.$stepComment.querySelector(".delighted-web-comment-box").classList.add("delighted-web-is-focus")},e.prototype._pseudoBlurCommentBox=function(){return this.$stepComment.querySelector(".delighted-web-comment-box").classList.remove("delighted-web-is-focus")},e.prototype._setupMask=function(){return null!=this.opts.offsets.bottom&&this.opts.offsets.bottom>0?this.dom.setStyle(this.$root,"bottom",this.opts.offsets.bottom+"px"):this.dom.setStyle(this.$root,"overflow","visible")},e.prototype._computeMaskHeight=function(t){return t+16},e.prototype._resizeMask=function(t,e){var i,n,o,s;return null==e&&(e=!0),n=this.$root.offsetHeight,i=this._computeMaskHeight(t),o=i>n,s=function(t){return function(){return t.dom.setStyle(t.$root,"height",i+"px"),t._measure()}}(this),o||!e?s():exports.utils.timeout(1e3*this.transitionDuration,s)},e.prototype._disableMask=function(){return this.dom.setStyle(this.$root,"height","auto"),this.dom.setStyle(this.$root,"overflow","visible"),this.dom.setStyle(this.$root,"bottom",0)},e.prototype._setupTypingIndicator=function(){if(!this.hasSetupTypingIndicator)return this.hasSetupTypingIndicator=!0,new exports.TypingIndicator(this.config,{$el:this.$stepComment.querySelector(".delighted-web-comment-box")})},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;exports.DisplayStrategyDesktop=function(i){function n(){this._autoSizeQuestionLabel=t(this._autoSizeQuestionLabel,this),this._animateBtns=t(this._animateBtns,this),this._resetBtnsAnimation=t(this._resetBtnsAnimation,this),this._setupEventHandlers=t(this._setupEventHandlers,this),this._injectTemplate=t(this._injectTemplate,this),this._showThanks=t(this._showThanks,this),this._hideComment=t(this._hideComment,this),this._showComment=t(this._showComment,this),this._showQuestion=t(this._showQuestion,this),this.hide=t(this.hide,this),this.show=t(this.show,this),n.__super__.constructor.apply(this,arguments),this.autoHideDelay=2*this.timingFactor,this.opacityTransitionDuration=.15*this.timingFactor,this.opacityTransitionEasing="ease-in-out"}return e(n,i),n.prototype.show=function(){return this._getTemplate(function(t){return function(e){return t._injectTemplate(e),t._measure(),t._setupEventHandlers(),t._showQuestion()}}(this))},n.prototype.hide=function(t){return null==t&&(t={}),this.state="hidden",exports.requestAnimationFrame(function(e){return function(){return e.dom.setOpacity(e.$survey,1),exports.requestAnimationFrame(function(){var i;return e.dom.transition(e.$survey,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s, opacity "+e.opacityTransitionDuration+"s "+e.opacityTransitionEasing+" "+(e.transitionDuration-e.opacityTransitionDuration)/5+"s"),e.dom.setOpacity(e.$survey,0),e.dom.translateY(e.$survey,e.heightSurvey),e._remove(),"function"==typeof(i=e.opts).onHide?i.onHide({token:e.token,source:t.source}):void 0})}}(this))},n.prototype._showQuestion=function(t){return"comment"===this.state?void this._hideComment():(this.state="question",exports.requestAnimationFrame(function(e){return function(){return e.$stepQuestion.classList.add("delighted-web-is-shown"),e._autoSizeQuestionLabel(),e._measure(),e.dom.setStyle(e.$root,"visibility","visible"),e.dom.transition(e.$survey,"none"),e.dom.translateY(e.$survey,e.heightSurvey),exports.requestAnimationFrame(function(){var i;return e.opts.disableShowAnimations||e.dom.transition(e.$survey,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s"),e.dom.setOpacity(e.$survey,1),e.dom.translateY(e.$survey,e.heightSurvey-e.heightStepQuestion),e.dom.translateY(e.$surveyPowered,-(e.heightSurvey-e.heightStepQuestion)),e._resizeMask(e.heightStepQuestion),e.opts.disableShowAnimations||e._animateBtns(),"function"==typeof(i=e.opts).onShow&&i.onShow({token:e.token}),"function"==typeof t?t():void 0})}}(this)))},n.prototype._showComment=function(t){return this.state="comment",exports.requestAnimationFrame(function(e){return function(){var i,n;return e._setScore(t),e.opts.disableShowCommentAnimations||e.dom.transition(e.$survey,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s"),e.dom.translateY(e.$survey,e.heightSurvey-e.heightStepQuestion-e.heightStepComment),e.opts.disableShowCommentAnimations||e.dom.transition(e.$surveyPowered,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s"),e.dom.translateY(e.$surveyPowered,-(e.heightSurvey-e.heightStepQuestion-e.heightStepComment)),e._resizeMask(e.heightStepQuestion+e.heightStepComment),n=e.opts.disableShowCommentAnimations?0:1e3*e.transitionDuration,exports.utils.timeout(n,function(){return e.$stepComment.querySelector(".delighted-web-comment-box").focus()}),e._pseudoFocusCommentBox(),"function"==typeof(i=e.opts).onShowComment?i.onShowComment():void 0}}(this))},n.prototype._hideComment=function(){return"comment"!==this.state?void this.config.LOGGER.error("Must be in 'comment' state to hide comment (was '"+this.state+"')."):(this.state="question",exports.requestAnimationFrame(function(t){return function(){return t.$stepComment.querySelector(".delighted-web-comment-box").blur(),t.dom.transition(t.$survey,"transform "+t.transitionDuration+"s "+t.transitionEasing+" 0s"),t.dom.translateY(t.$survey,t.heightSurvey-t.heightStepQuestion),t.dom.transition(t.$surveyPowered,"transform "+t.transitionDuration+"s "+t.transitionEasing+" 0s"),t.dom.translateY(t.$surveyPowered,-(t.heightSurvey-t.heightStepQuestion)),t._resizeMask(t.heightStepQuestion)}}(this)))},n.prototype._showThanks=function(){return this.state="thanks",exports.requestAnimationFrame(function(t){return function(){var e,i;return t.dom.setOpacity(t.$stepQuestion,1),t.dom.setOpacity(t.$stepComment,1),t.dom.setOpacity(t.$stepThanks,0),e=t.$stepThanks.querySelector(".delighted-web-thanks"),i=e.classList.contains("delighted-web-thanks-custom"),t.dom.setStyle(e,"display","block"),t._measure(),t.dom.transition(t.$survey,"none"),t.dom.translateY(t.$survey,t.heightSurvey-t.heightStepQuestion-t.heightStepComment),
t.dom.transition(t.$surveyPowered,"none"),t.dom.translateY(t.$surveyPowered,-(t.heightSurvey-t.heightStepQuestion-t.heightStepComment)),i||(t.dom.setOpacity(t.$surveyPowered,1),t.dom.setOpacity(t.$surveyClose,1)),exports.requestAnimationFrame(function(){if(t.dom.transition(t.$stepQuestion,"opacity "+t.opacityTransitionDuration+"s "+t.opacityTransitionEasing+" 0s"),t.dom.setOpacity(t.$stepQuestion,0),t.dom.transition(t.$stepComment,"opacity "+t.opacityTransitionDuration+"s "+t.opacityTransitionEasing+" 0s"),t.dom.setOpacity(t.$stepComment,0),t.dom.transition(t.$stepThanks,"opacity "+t.opacityTransitionDuration+"s "+t.opacityTransitionEasing+" 0s"),t.dom.setOpacity(t.$stepThanks,1),t.dom.translateY(t.$stepThanks,-(t.heightStepQuestion+t.heightStepComment)),t.dom.transition(t.$survey,"transform "+t.transitionDuration+"s "+t.transitionEasing+" 0s"),t.dom.translateY(t.$survey,t.heightSurvey-t.heightStepThanks),t.dom.transition(t.$surveyPowered,"transform "+t.transitionDuration+"s "+t.transitionEasing+" 0s"),t.dom.translateY(t.$surveyPowered,-(t.heightSurvey-t.heightStepThanks)),t._resizeMask(t.heightSurvey-t.heightStepQuestion-t.heightStepComment),!i)return t.dom.transition(t.$surveyPowered,"opacity "+t.opacityTransitionDuration+"s "+t.opacityTransitionEasing+" 0s"),t.dom.setOpacity(t.$surveyPowered,0),t.dom.transition(t.$surveyClose,"opacity "+t.opacityTransitionDuration+"s "+t.opacityTransitionEasing+" 0s"),t.dom.setOpacity(t.$surveyClose,0),exports.utils.timeout(1e3*(t.transitionDuration+t.autoHideDelay),function(){return t.hide({source:"auto_hide"})})})}}(this))},n.prototype._injectTemplate=function(){return n.__super__._injectTemplate.apply(this,arguments),this.dom.setStyle(this.$survey,"display","block"),this.$root.classList.add("delighted-web-desktop")},n.prototype._setupEventHandlers=function(){var t,e;return n.__super__._setupEventHandlers.apply(this,arguments),this.dom.bindEvent(this.$root.querySelector(".delighted-web-label-question"),"click",function(t){return function(){return exports.requestAnimationFrame(function(){return t._resetBtnsAnimation(),exports.requestAnimationFrame(function(){return t._animateBtns()})})}}(this)),t=this.$stepComment.querySelector(".delighted-web-comment-box"),e=this.$root.querySelector(".delighted-web-label-comment"),this.dom.bindEvent(t,"input",function(i){return function(){var n;return n=""===t.value?"block":"none",i.dom.setStyle(e,"display",n)}}(this))},n.prototype._resetBtnsAnimation=function(){var t,e,i,n,o,s,r;if(this.config.BROWSER_SUPPORT.features.animation){for(e=this.$stepQuestion.querySelectorAll(".delighted-web-question-score-number"),i=e.length,r=[],o=n=0,s=e.length;n<s;o=++n)t=e[o],r.push(this.dom.setStyle(t,"animation","none"));return r}},n.prototype._animateBtns=function(){var t,e,i,n,o,s,r,a,u,l;if(this.config.BROWSER_SUPPORT.features.animation){for(e=this.$stepQuestion.querySelectorAll(".delighted-web-question-score-number"),n=e.length,i=this.opts.buttonAnimationDirection,o=(.65*this.transitionDuration).toFixed(3),l=[],r=s=0,a=e.length;s<a;r=++s)t=e[r],u=i>0?r:n-r,l.push(this.dom.setStyle(t,"animation","delighted-web-btn-anim "+o+"s linear "+(u*o/(n-1)).toFixed(3)+"s 1 normal both"));return l}},n.prototype._autoSizeQuestionLabel=function(){var t,e,i,n;return i=this.$root.querySelector(".delighted-web-question .delighted-web-column"),t=this.$root.querySelector(".delighted-web-label-question"),e=t.cloneNode(!0),this.dom.setStyle(e,"position","absolute"),this.dom.setStyle(e,"white-space","nowrap"),this.dom.setStyle(e,"opacity","0"),t.parentNode.appendChild(e),n=e.offsetWidth,t.parentNode.removeChild(e),n<650?this.dom.setStyle(i,"max-width","none"):this.dom.clearInlineStyle(i,"max-width")},n}(exports.DisplayStrategy)}.call(this),function(){var t,e,i,n=function(t,e){return function(){return t.apply(e,arguments)}};t=0,e=1,i=function(){function i(){this.disengage=n(this.disengage,this),this.engage=n(this.engage,this),this.inferState=n(this.inferState,this),this.isEngaged=!1,this.originals={}}return i.prototype.inferState=function(i){return i.config.BROWSER_SUPPORT.platform.isIos&&i.windowHeight<.94*i.availHeight?t:e},i.prototype.engage=function(t){var i;if(!this.isEngaged)return i=t===e?"100px":"101vh",this.originals.bodyHeight=document.body.style.height,this.originals.bodyOverflow=document.body.style.overflow,document.body.style.height=i,document.body.style.overflow="hidden",this.originals.htmlHeight=document.documentElement.style.height,this.originals.htmlOverflow=document.documentElement.style.overflow,document.documentElement.style.height=i,document.documentElement.style.overflow="hidden",this.originals.windowScrollX=scrollX,this.originals.windowScrollY=scrollY,window.scrollX=0,window.scrollY=0,this.isEngaged=!0},i.prototype.disengage=function(){if(this.isEngaged)return document.body.style.height=this.originals.bodyHeight,document.body.style.overflow=this.originals.bodyOverflow,document.documentElement.style.height=this.originals.htmlHeight,document.documentElement.style.overflow=this.originals.htmlOverflow,scrollTo(this.originals.windowScrollX,this.originals.windowScrollY),this.isEngaged=!1},i}(),exports.ScrollLock=new i}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;exports.DisplayStrategyTouch=function(i){function n(){this._optimizeCommentBoxHeight=t(this._optimizeCommentBoxHeight,this),this._computeMaskHeight=t(this._computeMaskHeight,this),this._inferScrollState=t(this._inferScrollState,this),this._setupEventHandlers=t(this._setupEventHandlers,this),this._measure=t(this._measure,this),this._injectTemplate=t(this._injectTemplate,this),this._hideToast=t(this._hideToast,this),this._showThanks=t(this._showThanks,this),this._hideComment=t(this._hideComment,this),this._showComment=t(this._showComment,this),this._hideQuestion=t(this._hideQuestion,this),this._showQuestion=t(this._showQuestion,this),this._showSurvey=t(this._showSurvey,this),this._hideSurvey=t(this._hideSurvey,this),this._showToast=t(this._showToast,this),this.hide=t(this.hide,this),this.show=t(this.show,this),n.__super__.constructor.apply(this,arguments),this.autoHideDelay=1.5*this.timingFactor}return e(n,i),n.prototype.show=function(){return this._getTemplate(function(t){return function(e){return t._injectTemplate(e),t._measure(),t._setupEventHandlers(),t._showToast()}}(this))},n.prototype.hide=function(t){return null==t&&(t={}),this.state="hidden",exports.requestAnimationFrame(function(e){return function(){var i;return e.opts.disableScrollLock||exports.ScrollLock.disengage(),e.dom.transition(e.$survey,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s"),e.dom.translateY(e.$survey,e.heightSurvey),e._remove(),"function"==typeof(i=e.opts).onHide?i.onHide({token:e.token,source:t.source}):void 0}}(this))},n.prototype._showToast=function(){return this.state="toast",exports.requestAnimationFrame(function(t){return function(){return t.dom.setStyle(t.$root,"visibility","visible"),t.dom.translateY(t.$toast,t.heightToast),exports.requestAnimationFrame(function(){var e;return t.opts.disableShowAnimations||t.dom.transition(t.$toast,"transform "+t.transitionDuration+"s "+t.transitionEasing+" 0s"),t.dom.translateY(t.$toast,0),t._resizeMask(t.heightToast),"function"==typeof(e=t.opts).onShow?e.onShow({token:t.token}):void 0})}}(this))},n.prototype._hideSurvey=function(t){return window.clearTimeout(this.showSurveyTimeout),this.surveyShowing=!1,exports.requestAnimationFrame(function(e){return function(){return e.dom.setStyle(e.$toast,"display","block"),e.dom.translateY(e.$toast,0),e.dom.transition(e.$survey,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s"),e.dom.translateY(e.$survey,e.heightSurvey),e._resizeMask(e.heightToast),"function"==typeof t?t():void 0}}(this))},n.prototype._showSurvey=function(t){return this.surveyShowing?"function"==typeof t?t():void 0:(this.surveyShowing=!0,exports.requestAnimationFrame(function(e){return function(){var i;return i=e._inferScrollState(),e.dom.setStyle(e.$survey,"display","block"),e._measure(),e.dom.transition(e.$toast,"none"),e.dom.translateY(e.$toast,0),e.dom.transition(e.$survey,"none"),e.dom.translateY(e.$survey,e.heightSurvey),exports.requestAnimationFrame(function(){var n;return e.dom.transition(e.$toast,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s"),e.dom.translateY(e.$toast,e.heightToast),e.dom.transition(e.$survey,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s"),e.dom.translateY(e.$survey,0),e._disableMask(),n=1e3*e.transitionDuration,e.showSurveyTimeout=exports.utils.timeout(n,function(){return e.opts.disableScrollLock||exports.ScrollLock.engage(i),e.dom.setStyle(e.$toast,"display","none"),"function"==typeof t?t():void 0})})}}(this)))},n.prototype._showQuestion=function(t){return this.state="question",exports.requestAnimationFrame(function(e){return function(){return e.$surveyInner.classList.add("delighted-web-is-questioning"),e.$surveyInner.classList.remove("delighted-web-is-commenting"),e.$surveyInner.classList.remove("delighted-web-is-thanking"),e.$stepQuestion.classList.add("delighted-web-is-shown"),e.$stepComment.classList.remove("delighted-web-is-shown"),e.$stepThanks.classList.remove("delighted-web-is-shown"),e.dom.setStyle(e.$stepQuestion,"display","flex"),e.dom.setStyle(e.$stepComment,"display","none"),e.dom.setStyle(e.$stepThanks,"display","none"),e._showSurvey(t)}}(this))},n.prototype._hideQuestion=function(){return"question"!==this.state?void this.config.LOGGER.error("Must be in 'question' state to hide question (was '"+this.state+"')."):(this.state="toast",this._hideSurvey(function(t){return function(){return t.$surveyInner.classList.remove("delighted-web-is-questioning"),t.$surveyInner.classList.remove("delighted-web-is-commenting"),t.$surveyInner.classList.remove("delighted-web-is-thanking"),t.$stepQuestion.classList.remove("delighted-web-is-shown"),t.$stepComment.classList.remove("delighted-web-is-shown"),t.$stepThanks.classList.remove("delighted-web-is-shown"),t.dom.setStyle(t.$stepQuestion,"display","none"),t.dom.setStyle(t.$stepComment,"display","none"),t.dom.setStyle(t.$stepThanks,"display","none")}}(this)))},n.prototype._showComment=function(t){return this.state="comment",this._setScore(t),this._optimizeCommentBoxHeight(),this.dom.setStyle(this.$stepQuestion,"display","none"),this.dom.setStyle(this.$stepComment,"display","block"),this.dom.setStyle(this.$stepThanks,"display","none"),this._measure(),this.$surveyInner.classList.remove("delighted-web-is-questioning"),this.$surveyInner.classList.add("delighted-web-is-commenting"),this.$surveyInner.classList.remove("delighted-web-is-thanking"),this.$stepComment.querySelector(".delighted-web-comment-box").focus(),this._showSurvey(this.opts.onShowComment)},n.prototype._hideComment=function(){return"comment"!==this.state?void this.config.LOGGER.error("Must be in 'comment' state to hide comment (was '"+this.state+"')."):(this.state="toast",this._hideSurvey(function(t){return function(){return t.$surveyInner.classList.remove("delighted-web-is-questioning"),t.$surveyInner.classList.remove("delighted-web-is-commenting"),t.$surveyInner.classList.remove("delighted-web-is-thanking"),t.$stepQuestion.classList.remove("delighted-web-is-shown"),t.$stepComment.classList.remove("delighted-web-is-shown"),t.$stepThanks.classList.remove("delighted-web-is-shown"),t.dom.setStyle(t.$stepQuestion,"display","none"),t.dom.setStyle(t.$stepComment,"display","none"),t.dom.setStyle(t.$stepThanks,"display","none")}}(this)))},n.prototype._showThanks=function(){return this.state="thanks",exports.requestAnimationFrame(function(t){return function(){var e,i;if(t.dom.setStyle(t.$stepQuestion,"display","none"),t.dom.setStyle(t.$stepComment,"display","none"),t.dom.setStyle(t.$stepThanks,"display","flex"),t.$surveyInner.classList.remove("delighted-web-is-commenting"),t.$surveyInner.classList.add("delighted-web-is-thanking"),e=t.$stepThanks.querySelector(".delighted-web-thanks"),i=e.classList.contains("delighted-web-thanks-custom"),t.dom.setStyle(e,"display","block"),t._measure(),!i)return t.dom.setOpacity(t.$surveyClose,1),exports.requestAnimationFrame(function(){return t.dom.transition(t.$surveyClose,"opacity "+t.transitionDuration+"s "+t.transitionEasing+" 0s"),t.dom.setOpacity(t.$surveyClose,0),exports.utils.timeout(1e3*(t.transitionDuration+t.autoHideDelay),function(){return t.hide({source:"auto_hide"})})})}}(this))},n.prototype._hideToast=function(){return this.state="initial",exports.requestAnimationFrame(function(t){return function(){return t.dom.transition(t.$toast,"transform "+t.transitionDuration+"s "+t.transitionEasing+" 0s"),t.dom.translateY(t.$toast,t.heightToast)}}(this))},n.prototype._injectTemplate=function(){return n.__super__._injectTemplate.apply(this,arguments),this.$toast=this.$root.querySelector(".delighted-web-toast"),this.$toastClose=this.$root.querySelector(".delighted-web-toast-close"),this.dom.setStyle(this.$toast,"display","block"),this.opts.offsets.top&&this.dom.setStyle(this.$surveyInner,"margin-top",this.opts.offsets.top+"px"),this.opts.offsets.top&&this.dom.setStyle(this.$surveyClose,"margin-top",this.opts.offsets.top+"px"),this.$root.classList.add("delighted-web-touch")},n.prototype._measure=function(){return n.__super__._measure.apply(this,arguments),this.widthToast=this.$toast.offsetWidth,this.widthToastClose=this.$toastClose.offsetWidth,this.heightToast=this.$toast.offsetHeight},n.prototype._setupEventHandlers=function(){return n.__super__._setupEventHandlers.apply(this,arguments),this.dom.bindEvent(this.$toast,"click",function(t){return function(e){var i;return t._measure(),e.clientX<t.widthToast-t.widthToastClose?t._showQuestion():(t._hideToast(),t._remove(),"function"==typeof(i=t.opts).onHide?i.onHide({token:t.token,source:"toast_close"}):void 0)}}(this)),this.dom.bindEvent(window,"orientationchange",function(t){return function(){return t._optimizeCommentBoxHeight()}}(this)),this.dom.bindEvent(window,"resize",this._optimizeCommentBoxHeight())},n.prototype._inferScrollState=function(){return exports.ScrollLock.inferState({config:this.config,windowHeight:this.dom.calcWindowHeight(),availHeight:this.dom.calcScreenHeight()})},n.prototype._computeMaskHeight=function(){return n.__super__._computeMaskHeight.apply(this,arguments)-50},n.prototype._optimizeCommentBoxHeight=function(){var t;return t=function(t){return function(){var e,i,n,o,s,r,a,u,l,c,h,p;return e=24,l=6,h=t.dom.calcWindowHeight(),p=t.dom.calcWindowWidth(),u=2*e,i=6*e,a=10*e,n=t.config.BROWSER_SUPPORT.platform.isIpad,o=t.config.BROWSER_SUPPORT.platform.isIphone,s=t.config.BROWSER_SUPPORT.platform.isIpod,r="portrait"===t.dom.detectOrientation(),c=n?r?Math.floor(.4*h):Math.floor(.2*h):o||s?r?Math.floor(.3*h):Math.floor(.1*h):i,c-=c%e,Math.min(a,Math.max(u,c))+2*l}}(this),this.dom.setStyle(this.$stepComment.querySelector(".delighted-web-comment-box"),"height",t()+"px")},n}(exports.DisplayStrategy)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.updateSurveyTemplate=e(this.updateSurveyTemplate,this),this.toggleStateForPreview=e(this.toggleStateForPreview,this),this.displayStrategy=t}return t.prototype.toggleStateForPreview=function(t,e,i){return null==i&&(i={}),this.displayStrategy.toggleStateForPreview(t,e,i)},t.prototype.updateSurveyTemplate=function(t){return this.displayStrategy.config.SURVEY_TEMPLATE=t},t}(),exports.showSurvey=function(e,i,n){var o,s,r,a,u,l,c;return e.LOGGER.info("Survey showing."),o=null,c=function(t){var i;return i=e.PREVIEW_MODE?{displayStrategy:o}:{},"function"==typeof t?t(i):void 0},u=function(t){return e.LOGGER.info("Survey shown."),e.STATE_MANAGER.getLastSurveyedToken()!==t.token&&e.STATE_MANAGER.setLastSurveyedTimestamp(exports.utils.getCurrentTimestamp(),{token:t.token}),e.TELEMETRY.instrument("SURVEY_SHOWN"),c(n.onShow)},l=function(){return e.LOGGER.debug("Survey shown comment."),e.TELEMETRY.instrument("SURVEY_SHOWN_COMMENT"),c(n.onShowComment)},a=function(t){return e.LOGGER.debug("Survey responded."),e.STATE_MANAGER.setLastRespondedTimestamp(exports.utils.getCurrentTimestamp(),{token:t.token}),e.TELEMETRY.instrument("SURVEY_RESPONDED",{score:t.score})},s=function(){return e.LOGGER.debug("Survey commented."),e.TELEMETRY.instrument("SURVEY_COMMENTED")},r=function(t){return e.LOGGER.info("Survey hidden."),"toast_close"!==t.source&&"close"!==t.source||e.STATE_MANAGER.setLastRespondedTimestamp(exports.utils.getCurrentTimestamp(),{token:t.token}),e.TELEMETRY.instrument("SURVEY_HIDDEN",{source:t.source}),e.TELEMETRY.flush(),c(n.onHide)},exports.domready(function(){var c,h,p;return h={params:i,onShow:u,onShowComment:l,onRespond:a,onComment:s,onHide:r,buttonAnimationDirection:n.buttonAnimationDirection,disableShowAnimations:n.disableShowAnimations,disableShowCommentAnimations:n.disableShowCommentAnimations,disableScrollLock:n.disableScrollLock,offsets:n.offsets},p="touch"===e.FORCE_DISPLAY_STRATEGY||e.BROWSER_SUPPORT.platform.isTouch,c=p?new exports.DisplayStrategyTouch(e,h):new exports.DisplayStrategyDesktop(e,h),o=new t(c),c.show()})}}.call(this),function(t,e){var i=t.parse,n=[1,4,5,6,7,10,11],o=function(o){var s,r,a=0;if(r=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(o)){for(var u,l=0;u=n[l];++l)r[u]=+r[u]||0;r[2]=(+r[2]||1)-1,r[3]=+r[3]||1,"Z"!==r[8]&&r[9]!==e&&(a=60*r[10]+r[11],"+"===r[9]&&(a=0-a)),s=t.UTC(r[1],r[2],r[3],r[4],r[5]+a,r[6],r[7])}else s=i?i(o):NaN;return s};exports.iso8601={parse:o}}(Date),function(){exports.generateProperties=function(t,e,i){var n,o,s,r,a,u,l;return u=exports.clone(e.properties||{}),n=function(e){var i,n;return n=e.timeSinceFirstSeen,i=n>1e3*t.RETURN_DELAY,t.LOGGER.debug("Returning visitor:",i,"(~"+n+" ms since first seen)"),i},l=t.PREFIX_PROPERTIES?"Delighted ":"",null==u[o=l+"Page"]&&(u[o]=document.title),null==u[s=l+"Page URL"]&&(u[s]=location.href),null==u[r=l+"Referrer URL"]&&(u[r]=document.referrer),n(i)&&null==u[a=l+"Visitor Type"]&&(u[a]="Returning"),u._delighted_user_agent=navigator.userAgent,t.IS_TEST&&(u._delighted_test="1"),i.token&&(u._delighted_survey_request_token=i.token),u}}.call(this),function(){exports.checkSurveyEligibility=function(t,e){var i,n,o,s,r,a,u,l,c,h,p,d,m,f,y,g,v,S,_;return t.TELEMETRY.instrument("CHECKING_ELIGIBILITY"),i=exports.utils.getCurrentTimestamp(),s=function(t,e){var i,n;return i=null!=t.createdAt&&exports.iso8601.parse(t.createdAt),n="number"==typeof i&&!isNaN(i),n?Math.min(i,e):e},o=function(e,i){var n,o,s,r;s=exports.generateProperties(t,e,i),o={};for(n in s)r=s[n],o[n]=r;return e.email&&(o.email=e.email),e.name&&(o.name=e.name),o},S=function(t){return Math.random()<=t.sampleFactor},r=1e3*e.initialDelay,g=e.recurringPeriod?1e3*e.recurringPeriod:t.NEVER_FUTURE_TIMESTAMP,h=1e3*e.minSurveyInterval,p=1e3*e.minTimeForDisplay,n=t.STATE_MANAGER.getSetFirstSeenTimestamp(i),a=s(e,n),l=t.STATE_MANAGER.getLastSurveyedTimestamp()||t.NEVER_PAST_TIMESTAMP,c=t.STATE_MANAGER.getLastSurveyedToken(),u=t.STATE_MANAGER.getLastRespondedTimestamp()||t.NEVER_PAST_TIMESTAMP,_=i-n,f=e.forceDisplay?i:(d=Math.max(l,a),m=l>t.NEVER_PAST_TIMESTAMP?g:r,d+m),f=Math.max(f,l+h),t.TELEMETRY.instrument("ELIGIBILITY_TIMESTAMPS",{firstSeenTimestamp:n,initialTimestamp:a,lastSurveyTimestamp:l,nextSurveyTimestamp:f}),v=delighted.wasEligible?{isEligible:!1,reason:"person has already been surveyed during this session"}:"m5KZudle4UrncwrN"===t.WRITE_KEY&&!e.disableScrollLock&&/file/.test(location.protocol)?{isEligible:!1,reason:"configuration is unsupported"}:t.IS_TEST?{isEligible:!0,reason:"test mode is enabled",params:o(e,{timeSinceFirstSeen:_}),delay:0}:i-l<p&&u<l&&c?{isEligible:!0,isRedisplay:!0,reason:"person has an active survey (valid for another "+Math.round(Math.max(0,p-i+l)/1e3)+" seconds)",params:o(e,{timeSinceFirstSeen:_,token:c}),delay:0}:f<=i?S(e)?t.PLAN_LIMIT_EXHAUSTED?{isEligible:!1,reason:"although person is eligible, and was sampled (rate: "+100*e.sampleFactor+"%), plan survey limit is exhausted",exhausted:!0}:{isEligible:!0,reason:"person is eligible, and was sampled (rate: "+100*e.sampleFactor+"%)",params:o(e,{timeSinceFirstSeen:_}),delay:1e3*e.minTimeOnPage}:{isEligible:!1,reason:"although person is eligible, they were not sampled (rate: "+100*e.sampleFactor+"%)"}:(y=f>=t.NEVER_FUTURE_TIMESTAMP?"person has already been surveyed and recurring surveys are not configured":"person is not eligible until "+new Date(f),{isEligible:!1,reason:y}),v.isEligible&&(delighted.wasEligible=!0),v}}.call(this),function(){var t=new RegExp("bot|crawl|spider|borg|yahoo|slurp|archiver|netresearch|lycos|scooter  |altavista|teoma|oegp|charlotte|http client|htdig|ichiro|mogimogi|larbin|pompos|scrubby  |searchsight|semanticdiscovery|snappy|speedy|voila|vortex|voyager|zao|zeal|dataparksearch  |findlinks|yottaamonitor|browsermob|httpmonitor|bingpreview|pagepeeker|webthumb|url2png|zooshot  |gomeza|google sketchup|read later|pingdom|facebook|rackspace|scan|link|ezine|preview  |dig|tarantula|urllib|jakarta|wget|rget|monitor|libwww|moozilla|seer|spice|snoopy|feedfetcher  |google wireless transcoder|curl|wordpress|java|netfront|archive|xenu|feed|appmanager|covario  |perl|host|lwp|page speed|ptst|digext|nutch|sleuth|yottaamonitor","i");exports.isBot=function(e){return t.test(e)}}(),function(t,e,i){function n(t,e){return typeof t===e}function o(){var t,e,i,o,s,r,a;for(var u in g)if(g.hasOwnProperty(u)){if(t=[],e=g[u],e.name&&(t.push(e.name.toLowerCase()),e.options&&e.options.aliases&&e.options.aliases.length))for(i=0;i<e.options.aliases.length;i++)t.push(e.options.aliases[i].toLowerCase());for(o=n(e.fn,"function")?e.fn():e.fn,s=0;s<t.length;s++)r=t[s],a=r.split("."),1===a.length?S[a[0]]=o:(!S[a[0]]||S[a[0]]instanceof Boolean||(S[a[0]]=new Boolean(S[a[0]])),S[a[0]][a[1]]=o),E.push((o?"":"no-")+a.join("-"))}}function s(){return"function"!=typeof e.createElement?e.createElement(arguments[0]):O?e.createElementNS.call(e,"http://www.w3.org/2000/svg",arguments[0]):e.createElement.apply(e,arguments)}function r(){var t=e.body;return t||(t=s(O?"svg":"body"),t.fake=!0),t}function a(t,i,n,o){var a,u,l,c,h="modernizr",p=s("div"),d=r();if(parseInt(n,10))for(;n--;)l=s("div"),l.id=o?o[n]:h+(n+1),p.appendChild(l);return a=s("style"),a.type="text/css",a.id="s"+h,(d.fake?d:p).appendChild(a),d.appendChild(p),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(e.createTextNode(t)),p.id=h,d.fake&&(d.style.background="",d.style.overflow="hidden",c=w.style.overflow,w.style.overflow="hidden",w.appendChild(d)),u=i(p,t),d.fake?(d.parentNode.removeChild(d),w.style.overflow=c,w.offsetHeight):p.parentNode.removeChild(p),!!u}function u(t,e){return!!~(""+t).indexOf(e)}function l(t){return t.replace(/([a-z])-([a-z])/g,function(t,e,i){return e+i.toUpperCase()}).replace(/^-/,"")}function c(t,e){return function(){return t.apply(e,arguments)}}function h(t,e,i){var o;for(var s in t)if(t[s]in e)return i===!1?t[s]:(o=e[t[s]],n(o,"function")?c(o,i||e):o);return!1}function p(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-")}function d(e,n){var o=e.length;if("CSS"in t&&"supports"in t.CSS){for(;o--;)if(t.CSS.supports(p(e[o]),n))return!0;return!1}if("CSSSupportsRule"in t){for(var s=[];o--;)s.push("("+p(e[o])+":"+n+")");return s=s.join(" or "),a("@supports ("+s+") { #modernizr { position: absolute; } }",function(t){return"absolute"==getComputedStyle(t,null).position})}return i}function m(t,e,o,r){function a(){h&&(delete I.style,delete I.modElem)}if(r=!n(r,"undefined")&&r,!n(o,"undefined")){var c=d(t,o);if(!n(c,"undefined"))return c}for(var h,p,m,f,y,g=["modernizr","tspan","samp"];!I.style&&g.length;)h=!0,I.modElem=s(g.shift()),I.style=I.modElem.style;for(m=t.length,p=0;p<m;p++)if(f=t[p],y=I.style[f],u(f,"-")&&(f=l(f)),I.style[f]!==i){if(r||n(o,"undefined"))return a(),"pfx"!=e||f;try{I.style[f]=o}catch(t){}if(I.style[f]!=y)return a(),"pfx"!=e||f}return a(),!1}function f(t,e,i,o,s){var r=t.charAt(0).toUpperCase()+t.slice(1),a=(t+" "+L.join(r+" ")+r).split(" ");return n(e,"string")||n(e,"undefined")?m(a,e,o,s):(a=(t+" "+A.join(r+" ")+r).split(" "),h(a,e,i))}function y(t,e,n){return f(t,i,i,e,n)}var g=[],v={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(t,e){var i=this;setTimeout(function(){e(i[t])},0)},addTest:function(t,e,i){g.push({name:t,fn:e,options:i})},addAsyncTest:function(t){g.push({name:null,fn:t})}},S=function(){};S.prototype=v,S=new S,S.addTest("cookies",function(){try{e.cookie="cookietest=1";var t=e.cookie.indexOf("cookietest=")!=-1;return e.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",t}catch(t){return!1}}),S.addTest("cors","XMLHttpRequest"in t&&"withCredentials"in new XMLHttpRequest),S.addTest("json","JSON"in t&&"parse"in JSON&&"stringify"in JSON),S.addTest("queryselector","querySelector"in e&&"querySelectorAll"in e);var _=!1;try{_="WebSocket"in t&&2===t.WebSocket.CLOSING}catch(t){}S.addTest("websockets",_);var E=[],T=v._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];v._prefixes=T;var w=e.documentElement,b="CSS"in t&&"supports"in t.CSS,x="supportsCSS"in t;S.addTest("supports",b||x);var O="svg"===w.nodeName.toLowerCase(),C=function(){function t(t,e){var o;return!!t&&(e&&"string"!=typeof e||(e=s(e||"div")),t="on"+t,o=t in e,!o&&n&&(e.setAttribute||(e=s("div")),e.setAttribute(t,""),o="function"==typeof e[t],e[t]!==i&&(e[t]=i),e.removeAttribute(t)),o)}var n=!("onblur"in e.documentElement);return t}();v.hasEvent=C;var k=v.testStyles=a;S.addTest("touchevents",function(){var i;if("ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch)i=!0;else{var n=["@media (",T.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");k(n,function(t){i=9===t.offsetTop})}return i}),S.addTest("oninput",function(){var i,n=s("input");if(n.setAttribute("oninput","return"),C("oninput",w)||"function"==typeof n.oninput)return!0;try{var o=e.createEvent("KeyboardEvent");i=!1;var r=function(t){i=!0,t.preventDefault(),t.stopPropagation()};o.initKeyEvent("keypress",!0,!0,t,!1,!1,!1,!1,0,"e".charCodeAt(0)),w.appendChild(n),n.addEventListener("input",r,!1),n.focus(),n.dispatchEvent(o),n.removeEventListener("input",r,!1),w.removeChild(n)}catch(t){i=!1}return i});var R="Moz O ms Webkit",L=v._config.usePrefixes?R.split(" "):[];v._cssomPrefixes=L;var A=v._config.usePrefixes?R.toLowerCase().split(" "):[];v._domPrefixes=A;var $={elem:s("modernizr")};S._q.push(function(){delete $.elem});var I={style:$.elem.style};S._q.unshift(function(){delete I.style}),v.testAllProps=f,v.testAllProps=y,S.addTest("cssanimations",y("animationName","a",!0)),S.addTest("csstransitions",y("transition","all",!0)),S.addTest("csstransforms3d",function(){var t=!!y("perspective","1px",!0),e=S._config.usePrefixes;if(t&&(!e||"webkitPerspective"in w.style)){var i,n="#modernizr{width:0;height:0}";S.supports?i="@supports (perspective: 1px)":(i="@media (transform-3d)",e&&(i+=",(-webkit-transform-3d)")),i+="{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",k(n+i,function(e){t=7===e.offsetWidth&&18===e.offsetHeight})}return t}),o(),delete v.addTest,delete v.addAsyncTest;for(var D=0;D<S._q.length;D++)S._q[D]();exports.Modernizr=S}(window,document),function(){exports.detectBrowserSupport=function(){var t,e,i,n,o,s,r;return t=document.createElement("div"),e=document.createElement("textarea"),r=navigator.userAgent,n=/PhantomJS/.test(window.navigator.userAgent),i={cookies:exports.Modernizr.cookies,animation:exports.Modernizr.cssanimations,transition:exports.Modernizr.csstransitions,transform:exports.Modernizr.csstransforms3d,getComputedStyle:!!("getComputedStyle"in window),cors:exports.Modernizr.cors,json:exports.Modernizr.json,webSocket:exports.Modernizr.websockets,inputEvent:exports.Modernizr.oninput||!!("oninput"in e),querySelector:exports.Modernizr.queryselector,styleRemoveProperty:!!("removeProperty"in t.style)},s={isBot:exports.isBot(r),isTouch:exports.Modernizr.touchevents&&!n,isIos:/(iPad|iPod|iPhone)/.test(r),isIpad:/iPad/.test(r),isIpod:/iPod/.test(r),isIphone:/iPhone/.test(r)},o=!s.isBot&&i.querySelector&&i.styleRemoveProperty&&i.json&&i.cors&&i.inputEvent&&i.cookies,{features:i,platform:s,isSupported:o}}}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};exports.Telemetry=function(){function e(e){this._addEventListeners=t(this._addEventListeners,this),this.flush=t(this.flush,this),this.instrument=t(this.instrument,this),this.config=e,this.dom=new exports.DomHelpers(e),this.dataSetId=Math.random().toString(16).substring(2),this.data={dataSetId:this.dataSetId,telemetryVersion:i,events:[]},this._addEventListeners(),this.config.LOGGER.debug("Telemetry init.")}var i;return i=2,e.prototype.instrument=function(t,e){var i;return null==e&&(e={}),i=exports.clone(e),i.name=t,i.timestamp=(new Date).getTime(),i.treatments=this.config.EXPERIMENTS.treatments,this.data.events.push(i),"SURVEY_SHOWN"===t&&(this.shouldAutoFlushOnWindowUnload=!0),this.config.LOGGER.debug("Telemetry instrument:",t,i)},e.prototype.flush=function(){if(this.config.TELEMETRY_URL&&this.data.events.length>0)return this.config.LOGGER.debug("Telemetry flush:",this.data),exports.utils.ajaxSimpleCors({method:"POST",url:this.config.TELEMETRY_URL,body:{data:this.data},withCredentials:/^staging/.test(this.config.ENV),callback:function(t){return function(){return t.config.LOGGER.debug("Telemetry flushed.")}}(this)})},e.prototype._addEventListeners=function(){return this.dom.bindEvent(window,"beforeunload",function(t){return function(){t.instrument("WINDOW_BEFORE_UNLOAD"),t.shouldAutoFlushOnWindowUnload&&t.flush()}}(this))},e}()}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this._deserializeTimestampCookieValue=e(this._deserializeTimestampCookieValue,this),this._serializeTimestampCookieValue=e(this._serializeTimestampCookieValue,this),this._writeTimestampCookie=e(this._writeTimestampCookie,this),this._readTimestampCookie=e(this._readTimestampCookie,this),this.setLastRespondedTimestamp=e(this.setLastRespondedTimestamp,this),this.getLastRespondedTimestamp=e(this.getLastRespondedTimestamp,this),this.setLastSurveyedTimestamp=e(this.setLastSurveyedTimestamp,this),this.getLastSurveyedToken=e(this.getLastSurveyedToken,this),this.getLastSurveyedTimestamp=e(this.getLastSurveyedTimestamp,this),this.getSetFirstSeenTimestamp=e(this.getSetFirstSeenTimestamp,this),this.setFirstSeenTimestamp=e(this.setFirstSeenTimestamp,this),this.getFirstSeenTimestamp=e(this.getFirstSeenTimestamp,this),this.config=t}return t.prototype.getFirstSeenTimestamp=function(){var t;return t=this._readTimestampCookie(this.config.COOKIE_FIRST_SEEN_TIMESTAMP),null!=t?t.timestamp:void 0},t.prototype.setFirstSeenTimestamp=function(t,e){return this._writeTimestampCookie({name:this.config.COOKIE_FIRST_SEEN_TIMESTAMP,timestamp:t,metadata:e,expires:this.config.COOKIE_FIRST_SEEN_TIMESTAMP_EXPIRY_DAYS}),t},t.prototype.getSetFirstSeenTimestamp=function(t,e){return this.getFirstSeenTimestamp()||this.setFirstSeenTimestamp(t,e)},t.prototype.getLastSurveyedTimestamp=function(){var t;return t=this._readTimestampCookie(this.config.COOKIE_LAST_SURVEYED_TIMESTAMP),null!=t?t.timestamp:void 0},t.prototype.getLastSurveyedToken=function(){var t;return t=this._readTimestampCookie(this.config.COOKIE_LAST_SURVEYED_TIMESTAMP),null!=t?t.metadata.token:void 0},t.prototype.setLastSurveyedTimestamp=function(t,e){return this._writeTimestampCookie({name:this.config.COOKIE_LAST_SURVEYED_TIMESTAMP,timestamp:t,metadata:e,expires:this.config.COOKIE_LAST_SURVEYED_TIMESTAMP_EXPIRY_DAYS}),t},t.prototype.getLastRespondedTimestamp=function(){var t;return t=this._readTimestampCookie(this.config.COOKIE_LAST_RESPONDED_TIMESTAMP),null!=t?t.timestamp:void 0},t.prototype.setLastRespondedTimestamp=function(t,e){return this._writeTimestampCookie({name:this.config.COOKIE_LAST_RESPONDED_TIMESTAMP,timestamp:t,metadata:e,expires:this.config.COOKIE_LAST_RESPONDED_TIMESTAMP_EXPIRY_DAYS}),t},t.prototype._readTimestampCookie=function(t){var e;if(e=exports.Cookies.get(t),null!=e)return this._deserializeTimestampCookieValue(e)},t.prototype._writeTimestampCookie=function(t){var e;return e=this._serializeTimestampCookieValue(t.timestamp,t.metadata),exports.Cookies.set(t.name,e,{expires:t.expires,domain:this.config.COOKIE_DOMAIN})},t.prototype._serializeTimestampCookieValue=function(t,e){return[t.toString(),JSON.stringify(e||{})].join(":");
},t.prototype._deserializeTimestampCookieValue=function(t){var e,i,n;return i=t.split(":"),n=i.shift(),e=i.join(":")||"{}",{timestamp:new Date(parseInt(n,10)).getTime(),metadata:JSON.parse(e)}},t}(),exports.StateManager=t}.call(this),function(){var t;t=function(){function t(t,e){null==e&&(e={}),this.config=t,this.treatments=e.treatments||{}}return t}(),exports.Experiments=t}.call(this),function(){exports.loadDelightedLibrary=function(t){var e,i,n,o,s,r,a,u,l;if(i=window[t.NAME],!i.isInitialized){if(i.isInitialized=!0,a=exports.qs.parse(location.search.substring(1)),t.IS_TEST=i.isTest||/test/.test(a.delighted)||new RegExp(t.COOKIE_IS_TEST+"=1").test(document.cookie),t.IS_DEBUG=i.isDebug||/debug/.test(a.delighted)||new RegExp(t.COOKIE_IS_DEBUG+"=1").test(document.cookie),/touch/.test(a.delighted)&&(t.FORCE_DISPLAY_STRATEGY="touch"),t.COOKIE_DOMAIN="."+exports.topdomain(location.href),"."===t.COOKIE_DOMAIN&&(t.COOKIE_DOMAIN=null),r=i.logLevel||t.LOG_LEVEL||(t.IS_DEBUG?"debug":"info"),t.LOGGER=exports.utils.buildLogger("[Delighted]",r),t.LOGGER.debug("Configuration:",t),!t.IS_TEST&&!t.ACTIVE)return void t.LOGGER.warn('Currently turned off. To turn it on, sign in to Delighted, go to Settings > Integrations > Web and click "Turn on". If you turned it on recently, you may need to wait a few minutes.');if(t.BROWSER_SUPPORT=exports.detectBrowserSupport(),t.LOGGER.debug("Browser support:",t.BROWSER_SUPPORT),t.EXPERIMENTS=new exports.Experiments(t,{treatments:exports.clone(t.OVERRIDE_EXPERIMENT_TREATMENTS||{})}),t.TELEMETRY=new exports.Telemetry(t),t.TELEMETRY.instrument("TELEMETRY_INIT",{browserSupport:t.BROWSER_SUPPORT,cookieDomain:t.COOKIE_DOMAIN,isTest:t.IS_TEST,isDebug:t.IS_DEBUG,logLevel:r}),!t.BROWSER_SUPPORT.isSupported)return void t.LOGGER.warn("Unsupported browser.");if(!t.IS_TEST&&!t.ENABLE_TOUCH_PLATFORMS&&t.BROWSER_SUPPORT.platform.isTouch)return void t.LOGGER.warn("Touch platforms not enabled.");for(t.STATE_MANAGER=new exports.StateManager(t),i.survey=function(e){var i;return t.LOGGER.debug("Survey called."),t.TELEMETRY.instrument("SURVEY_CALLED"),e=exports.clone(e||{}),null==e.initialDelay&&(e.initialDelay=t.DEFAULT_INITIAL_DELAY),null==e.recurringPeriod&&(e.recurringPeriod=t.DEFAULT_RECURRING_PERIOD),null==e.forceDisplay&&(e.forceDisplay=t.DEFAULT_FORCE_DISPLAY),null==e.minTimeOnPage&&(e.minTimeOnPage=t.DEFAULT_MIN_TIME_ON_PAGE),null==e.minTimeForDisplay&&(e.minTimeForDisplay=t.DEFAULT_MIN_TIME_FOR_DISPLAY),null==e.minSurveyInterval&&(e.minSurveyInterval=t.DEFAULT_MIN_SURVEY_INTERVAL),null==e.sampleFactor&&(e.sampleFactor=t.DEFAULT_SAMPLE_FACTOR),null==e.buttonAnimationDirection&&(e.buttonAnimationDirection="stars_five"===t.DEFAULT_SURVEY_TYPE.id?1:-1),null==e.disableShowAnimations&&(e.disableShowAnimations=!1),null==e.disableShowCommentAnimations&&(e.disableShowCommentAnimations=!1),null==e.disableScrollLock&&(e.disableScrollLock=!1),null==e.offsets&&(e.offsets={}),"m5KZudle4UrncwrN"===t.WRITE_KEY&&/file/.test(location.protocol)&&(e.initialDelay=t.DEFAULT_INITIAL_DELAY,e.forceDisplay=t.DEFAULT_FORCE_DISPLAY,e.minTimeOnPage=60),i=exports.checkSurveyEligibility(t,e),t.LOGGER.debug("Survey options:",e),t.LOGGER.debug("Survey eligibility:",i),t.TELEMETRY.instrument("ELIGIBILITY_RESULT",{inputOpts:e,eligibility:i}),i.isEligible?(t.LOGGER.info("Survey will show because "+i.reason+"..."),exports.utils.timeout(i.delay,function(){return exports.showSurvey(t,i.params,{onShow:e.onShow,onShowComment:e.onShowComment,onHide:e.onHide,buttonAnimationDirection:e.buttonAnimationDirection,disableShowAnimations:e.disableShowAnimations||i.isRedisplay,disableShowCommentAnimations:e.disableShowCommentAnimations,disableScrollLock:e.disableScrollLock,offsets:e.offsets})})):t.LOGGER.info("Survey not shown because "+i.reason+".")},i.reset=function(){return t.LOGGER.debug("Reset called."),t.TELEMETRY.instrument("RESET_CALLED"),exports.Cookies.remove(t.COOKIE_FIRST_SEEN_TIMESTAMP,{domain:t.COOKIE_DOMAIN}),exports.Cookies.remove(t.COOKIE_LAST_SURVEYED_TIMESTAMP,{domain:t.COOKIE_DOMAIN})},(t.IS_TEST||/reset/.test(a.delighted))&&i.reset(),l=[],o=0,s=i.length;o<s;o++)u=i[o],n=u[0],e=u[1],t.LOGGER.debug("Dequeued:",n,e),l.push(i[n].apply(i,e));return l}}}.call(this);
              exports.loadDelightedLibrary({"ENV":"production","ACTIVE":true,"LOG_LEVEL":null,"NAME":"delighted","WRITE_KEY":"Dk30CC86ba0nATlK","PREVIEW_MODE":false,"DEFAULT_SURVEY_TYPE":{"id":"nps","groups":[{"id":"promoter","id_pluralized":"promoters","id_dasherized":"promoter","scores_gte":9,"scores_lte":10,"human_name":"promoter","human_name_pluralized":"promoters","human_name_titleized":"Promoter","human_name_titleized_pluralized":"Promoters"},{"id":"passive","id_pluralized":"passives","id_dasherized":"passive","scores_gte":7,"scores_lte":8,"human_name":"passive","human_name_pluralized":"passives","human_name_titleized":"Passive","human_name_titleized_pluralized":"Passives"},{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors"}],"groups_by_score":{"9":{"id":"promoter","id_pluralized":"promoters","id_dasherized":"promoter","scores_gte":9,"scores_lte":10,"human_name":"promoter","human_name_pluralized":"promoters","human_name_titleized":"Promoter","human_name_titleized_pluralized":"Promoters"},"10":{"id":"promoter","id_pluralized":"promoters","id_dasherized":"promoter","scores_gte":9,"scores_lte":10,"human_name":"promoter","human_name_pluralized":"promoters","human_name_titleized":"Promoter","human_name_titleized_pluralized":"Promoters"},"7":{"id":"passive","id_pluralized":"passives","id_dasherized":"passive","scores_gte":7,"scores_lte":8,"human_name":"passive","human_name_pluralized":"passives","human_name_titleized":"Passive","human_name_titleized_pluralized":"Passives"},"8":{"id":"passive","id_pluralized":"passives","id_dasherized":"passive","scores_gte":7,"scores_lte":8,"human_name":"passive","human_name_pluralized":"passives","human_name_titleized":"Passive","human_name_titleized_pluralized":"Passives"},"0":{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors"},"1":{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors"},"2":{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors"},"3":{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors"},"4":{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors"},"5":{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors"},"6":{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors"}},"chart_y_tick_values":[-100,-50,0,50,100],"chart_y_domain":[-125,125]},"DEFAULT_INITIAL_DELAY":21600,"DEFAULT_RECURRING_PERIOD":null,"DEFAULT_FORCE_DISPLAY":false,"DEFAULT_MIN_TIME_ON_PAGE":2,"DEFAULT_MIN_TIME_FOR_DISPLAY":120,"DEFAULT_MIN_SURVEY_INTERVAL":2592000,"DEFAULT_SAMPLE_FACTOR":1.0,"PLAN_LIMIT_EXHAUSTED":true,"ENABLE_TOUCH_PLATFORMS":false,"OVERRIDE_EXPERIMENT_TREATMENTS":{},"COOKIE_LAST_SURVEYED_TIMESTAMP":"_delighted_lst","COOKIE_LAST_SURVEYED_TIMESTAMP_EXPIRY_DAYS":3650,"COOKIE_LAST_RESPONDED_TIMESTAMP":"_delighted_lrt","COOKIE_LAST_RESPONDED_TIMESTAMP_EXPIRY_DAYS":3650,"COOKIE_FIRST_SEEN_TIMESTAMP":"_delighted_fst","COOKIE_FIRST_SEEN_TIMESTAMP_EXPIRY_DAYS":3650,"COOKIE_IS_TEST":"_delighted_tst","COOKIE_IS_DEBUG":"_delighted_dbg","NEVER_FUTURE_TIMESTAMP":4618380874000,"NEVER_PAST_TIMESTAMP":-1693048870000,"RETURN_DELAY":21600,"PREFIX_PROPERTIES":true,"SURVEY_URL":"https://web.delighted.com/t/X8vifTMw","TELEMETRY_URL":"https://web.delighted.com/integrations/web/v1/telemetry/Dk30CC86ba0nATlK"});
            })();
          } catch(e) {
            if (console && console.error) { // :ALLOW_CONSOLE:
              var message;
              try { message = (e && e.message) || String(e); } catch(e) {};
              console.log("[Delighted] Error loading: ", message); // :ALLOW_CONSOLE:
            }
          }
